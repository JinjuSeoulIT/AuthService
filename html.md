/*------------------------------------------------------------------------------
-- 개체 이름: MEMBER.MEMBER_AUTHENTICATION
-- 만든 날짜: 2026/01/14 오전 9:13:16
-- 마지막 수정 날짜: 2026/01/14 오전 9:13:16
-- 상태: VALID
------------------------------------------------------------------------------*/
DROP TABLE MEMBER.MEMBER_AUTHENTICATION CASCADE CONSTRAINTS;

CREATE TABLE MEMBER.MEMBER_AUTHENTICATION (
AUTHENTICATION_ID    NUMBER                 NOT NULL,
USER_ID              NUMBER                 NOT NULL,
REAL_NAME            VARCHAR2(50 BYTE)      NOT NULL,
PHONE                VARCHAR2(20 BYTE)      NOT NULL,
EMAIL                VARCHAR2(100 BYTE)     NOT NULL,
BIRTH_DATE           DATE                       NULL,
SEX                  VARCHAR2(10 BYTE)          NULL,
ZIP_CODE             VARCHAR2(10 BYTE)      NOT NULL,
ADDRESS1             VARCHAR2(200 BYTE)     NOT NULL,
ADDRESS2             VARCHAR2(200 BYTE)         NULL,
NATION_CODE          VARCHAR2(10 BYTE)          NULL
)
TABLESPACE USERS
PCTFREE    10
INITRANS   1
MAXTRANS   255
STORAGE (
INITIAL     64 K
NEXT        1 M
MINEXTENTS  1
MAXEXTENTS  UNLIMITED
)
LOGGING
NOCACHE
MONITORING
NOPARALLEL
;

ALTER TABLE MEMBER.MEMBER_AUTHENTICATION ADD
(
CONSTRAINT CK_AUTH_GENDER
CHECK ( SEX IN ('male', 'female') )
);

ALTER TABLE MEMBER.MEMBER_AUTHENTICATION ADD
(
CONSTRAINT PK_MEMBER_AUTH
PRIMARY KEY ( AUTHENTICATION_ID )
USING INDEX
TABLESPACE USERS
PCTFREE 10
INITRANS 2
MAXTRANS 255
STORAGE (
INITIAL     64 K
NEXT        1 M
MINEXTENTS  1
MAXEXTENTS  UNLIMITED
)
);

ALTER TABLE MEMBER.MEMBER_AUTHENTICATION ADD
(
CONSTRAINT UQ_AUTH_USER
UNIQUE ( USER_ID )
USING INDEX
TABLESPACE USERS
PCTFREE 10
INITRANS 2
MAXTRANS 255
STORAGE (
INITIAL     64 K
NEXT        1 M
MINEXTENTS  1
MAXEXTENTS  UNLIMITED
)
);

ALTER TABLE MEMBER.MEMBER_AUTHENTICATION ADD
(
CONSTRAINT UQ_AUTH_PHONE
UNIQUE ( PHONE )
USING INDEX
TABLESPACE USERS
PCTFREE 10
INITRANS 2
MAXTRANS 255
STORAGE (
INITIAL     64 K
NEXT        1 M
MINEXTENTS  1
MAXEXTENTS  UNLIMITED
)
);

ALTER TABLE MEMBER.MEMBER_AUTHENTICATION ADD
(
CONSTRAINT UQ_AUTH_EMAIL
UNIQUE ( EMAIL )
USING INDEX
TABLESPACE USERS
PCTFREE 10
INITRANS 2
MAXTRANS 255
STORAGE (
INITIAL     64 K
NEXT        1 M
MINEXTENTS  1
MAXEXTENTS  UNLIMITED
)
);

ALTER TABLE MEMBER.MEMBER_AUTHENTICATION ADD
(
CONSTRAINT FK_AUTH_USER
FOREIGN KEY ( USER_ID )
REFERENCES MEMBER.MEMBER_USER ( USER_ID )
ON DELETE  CASCADE
);



/*------------------------------------------------------------------------------
-- 개체 이름: MEMBER.MEMBER_USER
-- 만든 날짜: 2026/01/14 오전 9:13:15
-- 마지막 수정 날짜: 2026/01/14 오전 9:13:15
-- 상태: VALID
------------------------------------------------------------------------------*/
DROP TABLE MEMBER.MEMBER_USER CASCADE CONSTRAINTS;

CREATE TABLE MEMBER.MEMBER_USER (
USER_ID          NUMBER                 NOT NULL,
LOGIN_ID         VARCHAR2(50 BYTE)      NOT NULL,
LOGIN_TYPE       VARCHAR2(20 BYTE)     DEFAULT 'LOCAL'      NOT NULL,
PASSWORD_HASH    VARCHAR2(255 BYTE)     NOT NULL,
CREATED_AT       DATE                  DEFAULT SYSDATE                   NOT NULL,
UPDATED_AT       DATE                  DEFAULT SYSDATE                   NOT NULL
)
TABLESPACE USERS
PCTFREE    10
INITRANS   1
MAXTRANS   255
STORAGE (
INITIAL     64 K
NEXT        1 M
MINEXTENTS  1
MAXEXTENTS  UNLIMITED
)
LOGGING
NOCACHE
MONITORING
NOPARALLEL
;

ALTER TABLE MEMBER.MEMBER_USER ADD
(
CONSTRAINT PK_MEMBER_USER
PRIMARY KEY ( USER_ID )
USING INDEX
TABLESPACE USERS
PCTFREE 10
INITRANS 2
MAXTRANS 255
STORAGE (
INITIAL     64 K
NEXT        1 M
MINEXTENTS  1
MAXEXTENTS  UNLIMITED
)
);

ALTER TABLE MEMBER.MEMBER_USER ADD
(
CONSTRAINT UQ_MEMBER_USER_LOGIN_ID
UNIQUE ( LOGIN_ID )
USING INDEX
TABLESPACE USERS
PCTFREE 10
INITRANS 2
MAXTRANS 255
STORAGE (
INITIAL     64 K
NEXT        1 M
MINEXTENTS  1
MAXEXTENTS  UNLIMITED
)
);